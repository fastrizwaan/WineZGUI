winezgui-import-wine-directory()
{

  
  # 1. Ask user to select import directory from where it will copy
  dbug "I: Script: ${FUNCNAME[0]}: Select import directory"
  unset TITLE
  TITLE="Choose a wine prefix directory to import into WineZGUI!"

  IMPORT_DIR=$(${ZENITY_CMD}  --file-selection --title="${TITLE}" --directory)
  if [ -z "${IMPORT_DIR}" ]; then
      dbug "I: Script: ${FUNCNAME[0]}: Select import directory: Cancelled!"
      Script_Window
  fi

  # Get the name from full path
  IMPORT_BASENAME=$(basename "${IMPORT_DIR}")
  
  # 2. Check system.reg file exists
  if [ ! -f "${IMPORT_DIR}/system.reg" ]; then
     unset MSGTEXT
     MSGTEXT=()
     MSGTEXT+="system.reg not found inside \"${IMPORT_BASENAME}\"\n"
     MSGTEXT+="A wine prefix should have system.reg file in it.\n"
     MSGTEXT+="E.g., ~/.wine"
     ${ZENITY_CMD} --error --title="Not a wine directory" --text="${MSGTEXT}"
     return 1
  fi

  # 3. Find Exe in the given directory
  # script-get-selected-exe expects prefixname
  export PREFIXNAME=${IMPORT_DIR}
  SOURCE "script-get-selected-exe"
  script-get-selected-exe
  
}